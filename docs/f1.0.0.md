<br/>



>[!WARNING|style: flat|label:  ç®€è¦è¯´æ˜ ]
>
>- åœ¨`.NET 6`ä¸­å¼•ç”¨ `ConfigurationManager`<span style='color:red'>[ åº”å¯¹ï¼šåŠ¨æ€æ·»åŠ é…ç½®æºçš„æƒ…å†µ ]</span> [<span style='color:#008B00'>[ğŸ‘“ W1 ]</span>](https://mp.weixin.qq.com/s?__biz=MzAxMTA2MDYwNg==&mid=2650114475&idx=1&sn=8cf4699b53ad30df0a97dcee8ad6d581&scene=21#wechat_redirect':target=_blank')
>
>   åœ¨ä»¥å‰é€šè¿‡`ConfigurationBuilder.Buid()`åå¦‚æœåœ¨æƒ³æ·»åŠ æ–°çš„æ•°æ®æºæ ¹æœ¬æ— æ³•å®ç°
>
>
>âš  <span style='color:red'>[ åŠ¨æ€é…ç½® ] å½“`Sources`é…ç½®æºå‘ç”Ÿå˜æ›´(`æ·»åŠ , åˆ é™¤`)ï¼Œå…¶`ConfigurationManager`è‡ªèº«ç»´æŠ¤çš„é…ç½®çŠ¶æ€å°† [ è‡ªåŠ¨åˆ·æ–° + é€šçŸ¥ ]</span>
>
>```csharp
>public sealed class ConfigurationManager : IConfigurationRoot,
>                                            IConfigurationBuilder, 
>                                            IDisposable
>{
>
>       #region IConfiguration
>
>       public string this[string key] { set; get; }
>       public IConfigurationSection GetSection(string key);
>
>       #endregion
>
>       #region IConfigurationRoot
>
>       private readonly List<IConfigurationProvider> _providerManager = new();
>       IEnumerable<IConfigurationProvider> IConfigurationRoot.Providers { get; } => _providerManager;
>       void Reload()
>       {
>            foreach (IConfigurationProvider provider in this.Providers) provider.Load();
>            this.RaiseChanged();
>       }
>                                                
>       # é€šçŸ¥: é…ç½®å˜æ›´
>       private ConfigurationReloadToken _changeToken = new ConfigurationReloadToken();  
>       IChangeToken IConfiguration.GetReloadToken() => this._changeToken;
>
>       private void RaiseChanged()
>       {
>             // [ é‡ç½®çŠ¶æ€ ]åˆ›å»ºå…¨æ–°çš„: CancellationTokenSource -> ConfigurationReloadToken
>             ConfigurationReloadToken previousToken = Interlocked.Exchange(ref this._changeToken, new ConfigurationReloadToken());
>             previousToken.OnReload();
>       }                                           
>     
>       #endregion
>
>       #region IConfigurationBuilder
>
>       IDictionary<string, object> IConfigurationBuilder.Properties { get; }
>       IList<IConfigurationSource> IConfigurationBuilder.Sources { get; }
>
>       private readonly List<IDisposable> _changeTokenRegistrations = new();
>       IConfigurationBuilder IConfigurationBuilder.Add(IConfigurationSource source)
>       {
>
>             IConfigurationProvider provider = source.Build(this);
>             provider.Load();
>             this._changeTokenRegistrations.Add(ChangeToken.OnChange(() => provider.GetReloadToken(), this.RaiseChanged);
>
>             # [ æ•°æ®æºå˜åŒ– ] é€šçŸ¥å˜æ›´
>             this._providerManager.AddProvider(provider);
>             this.RaiseChanged();
>
>       }
>
>       IConfigurationRoot IConfigurationBuilder.Build() => this;
>       public void Dispose();
>
>       #endregion
>
>       /*... ä»£ç å¿½ç•¥ ...*/
>
>}
>
>
>```
>
><br/>

