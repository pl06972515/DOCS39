<br/>

>[!WARNING|style: flat|label:  ç®€è¦è¯´æ˜ ]
>
>- <span style='color:Blue'>[ ç¯å¢ƒå˜é‡å‰ç¼€`Prefix`]</span> å¦‚æœè®¾ç½®äº†æ­¤å±æ€§ï¼Œåˆ™ç³»ç»Ÿå°†æ ¹æ®å‰ç¼€ [ è¿‡æ»¤ç¯å¢ƒå˜é‡ ] [<span style='color:#008B00'>[ğŸ‘“ Environment ]</span>](https://pl06972515.github.io/DOCS1/#/e1.0.0 ':target=_blank')
>
>   [<span style='color:#008B00'>[ğŸ‘“ NuGet - Microsoft.Extensions.Configuration.EnvironmentVariables ]</span>](https://www.nuget.org/packages/Microsoft.Extensions.Configuration.EnvironmentVariables/ ':target=_blank')
>
>   [`namespaceï¼šMicrosoft.Extensions.Configuration.EnvironmentVariables`]
>
>
><br/>

<!-- tabs:start -->

#### **IConfigurationSource**

```csharp
public class EnvironmentVariablesConfigurationSource : IConfigurationSource
{

      # [ ç¯å¢ƒå˜é‡å‰ç¼€ ]
      public string Prefix { get; set; } 
      public IConfigurationProvider Build(IConfigurationBuilder builder)
          => new EnvironmentVariablesConfigurationProvider(Prefix);

}


```



#### **IConfigurationProvider**

```csharp
public class EnvironmentVariablesConfigurationProvider : ConfigurationProvider
{

	  private readonly string _prefix;
	  public EnvironmentVariablesConfigurationProvider(string prefix = null)
		  => this._prefix = prefix;

	  public override void Load()
	  {
           
           /// <summary>
           /// [ ä½¿ç”¨ _ ä»£æ›¿ ï¼š] ç¯å¢ƒå˜é‡è§„èŒƒ ( åç§°åˆ†éš”ç¬¦ä¸èƒ½ä½¿ç”¨ : )
           ///   - string x = "Test_Name";
           ///   - Console.WriteLine(x["Test_".Length..]); //Name
           /// </summary>
		   base.Data = Environment.GetEnvironmentVariables().Cast<DictionaryEntry>()
			   .Where(entry => entry.Key.ToString().StartsWith(this._prefix, StringComparison.OrdinalIgnoreCase))
			   .ToDictionary(
				   x => x.Key.ToString()[this._prefix.Length..].Replace("_", ":"),
				   x => x.Value.ToString()
			   );
           
	  }

}


```



#### **EnvironmentVariablesExtensions**

```csharp
public static class EnvironmentVariablesExtensions
{

       public static IConfigurationBuilder AddEnvironmentVariables(this IConfigurationBuilder configurationBuilder)
       {
             configurationBuilder.Add(new EnvironmentVariablesConfigurationSource());
             return configurationBuilder;
       }

       public static IConfigurationBuilder AddEnvironmentVariables(this IConfigurationBuilder configurationBuilder,
             string prefix)
       {
             configurationBuilder.Add(new EnvironmentVariablesConfigurationSource { Prefix = prefix });
             return configurationBuilder;
       }

}


```



<!-- tabs:end -->



```csharp
public class User
{
	 public string Name { get; set; }
	 public int Age { get; set; }
	 public ContactInfo ContactInfo { get; set; }
}

public class ContactInfo
{
	 public string Email { get; set; }
	 public string PhontNo { get; set; }
}


```

```csharp
Environment.SetEnvironmentVariable("Test_Name", "å¼ ä¸‰");
Environment.SetEnvironmentVariable("Test_Age", "20");
Environment.SetEnvironmentVariable("Test_ContactInfo:Email", "13810000000@qq.com");
Environment.SetEnvironmentVariable("Test_ContactInfo_PhontNo", "13810000000");

IConfigurationRoot root = new ConfigurationBuilder()
							 .AddEnvironmentVariables("Test_")
							 .Build();

User u = root.Get<User>();
Console.WriteLine(u.Name);


```

