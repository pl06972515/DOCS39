<br/>

!> <span style='color:red'>[ 配置`SSH`服务器 ] (`设置 → 系统管理 → 系统配置`)</span>

![image-20251103051623859](wwwroot\DocImage\image-20251103051623859.png ':size=400')



<!-- tabs:start -->

#### **[ 普通任务 ]**

!> <span style='color:red'>[ 添加构建步骤 ]</span>

![image-20251103053324699](wwwroot\DocImage\image-20251103053324699.png ':size=400')

```shell
echo '[ 当前步骤 ] 拉取镜像'
docker pull 192.168.8.144:8087/pm2-services/testwebapp:${BUILD_NUMBER}

echo '[ 当前步骤 ] 容器启动'
# 强制删除现有容器
docker rm -f testwebapp || true

# 容器启动 ( HTTP )
# HTTPS + 挂载证书: 
# ASPNETCORE_HTTPS_PORTS = 8089
# - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro 
# - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
docker run -d --name testwebapp \
  -p 7008:7008 \
  -e ASPNETCORE_ENVIRONMENT=Development \
  -e ASPNETCORE_HTTP_PORTS=7008 \
  192.168.8.144:8087/pm2-services/testwebapp:${BUILD_NUMBER}

echo '[ 当前步骤 ] 启动日志'
sleep 1
docker logs --tail 20 testwebapp


```



#### **[ 管道任务 ]**

!> <span style='color:red'>[ 生成流水线脚本 ]</span>

![image-20251103053703540](wwwroot\DocImage\image-20251103053703540.png ':size=400')



<!-- tabs:end -->
