<br/>



<!-- tabs:start -->

#### **[ é…ç½®æ’ä»¶ ] Jenkins**

!> <span style='color:red'>[ é…ç½®`SSH`æœåŠ¡å™¨ ] (`è®¾ç½® â†’ ç³»ç»Ÿé…ç½®`)</span>

![image-20251103051623859](wwwroot\DocImage\image-20251103051623859.png ':size=400')



#### **[ ğŸŸ¢ æ™®é€šä»»åŠ¡ ]**

!> <span style='color:red'>[ æ„å»ºæ­¥éª¤`SSH`]</span>

![image-20251103053324699](wwwroot\DocImage\image-20251103053324699.png ':size=400')

!> <span style='color:red'>[ æ³¨æ„äº‹é¡¹ ] åœ¨`Exec command`é‡Œé¢æ‰§è¡Œçš„å‘½ä»¤æ˜¯åœ¨ [ è¿œç¨‹æœåŠ¡å™¨`SSH`ä¸­æ‰§è¡Œ ]</span>

```shell
echo '[ å½“å‰æ­¥éª¤ ] æ‹‰å–é•œåƒ'
docker pull 192.168.8.144:8087/pm2-services/testwebapp:${BUILD_NUMBER}

echo '[ å½“å‰æ­¥éª¤ ] å®¹å™¨å¯åŠ¨'
# å¼ºåˆ¶åˆ é™¤ç°æœ‰å®¹å™¨
docker rm -f testwebapp || true

# å®¹å™¨å¯åŠ¨ ( HTTP )
# HTTPS + æŒ‚è½½è¯ä¹¦: 
# ASPNETCORE_HTTPS_PORTS = 8089
# - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro 
# - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
docker run -d --name testwebapp \
  -p 7008:7008 \
  -e ASPNETCORE_ENVIRONMENT=Development \
  -e ASPNETCORE_HTTP_PORTS=7008 \
  192.168.8.144:8087/pm2-services/testwebapp:${BUILD_NUMBER}


```



#### **[ ğŸŸ¢ ç®¡é“ä»»åŠ¡ ]**

!> <span style='color:red'>[ ç‰‡æ®µç”Ÿæˆå™¨ ]Â ç”Ÿæˆæµæ°´çº¿è„šæœ¬</span>

![image-20251103053703540](wwwroot\DocImage\image-20251103053703540.png ':size=400')

```shell
steps {

     # [ æ³¨æ„äº‹é¡¹ ] execCommand = """ å¿…é¡»ä½¿ç”¨ä¸‰å¼•å· ( å¦åˆ™æ— æ³•æ­£ç¡®å¡«å……ç¯å¢ƒå˜é‡ )
     sshPublisher(publishers: [sshPublisherDesc(configName: '192.168.8.173', ..., execCommand: """

         # [ æ‹‰å–é•œåƒ ]
         docker pull ${Habor_HOST}/${Habor_PUSH}/testwebapp:${BUILD_NUMBER}

         # [ åˆ é™¤å®¹å™¨ ] 
         docker rm -f testwebapp || true
         # [ å®¹å™¨å¯åŠ¨ ]
         docker run -d --name testwebapp \
                       --restart=always \
				       -p ${ASPNETCORE_HTTP_PORTS}:${ASPNETCORE_HTTP_PORTS} \
					   -e ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT} \
					   -e ASPNETCORE_HTTP_PORTS=${ASPNETCORE_HTTP_PORTS} \
					   ${Habor_HOST}/${Habor_PUSH}/testwebapp:${BUILD_NUMBER}

     """, execTimeout: 120000, ...)
     
}
            
   
```



<!-- tabs:end -->
